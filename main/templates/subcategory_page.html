{% extends 'base.html' %}
{% load static %}
{% block meta %}
<link rel="stylesheet" href="{% static 'css/authstyle.css' %}">
<link rel="stylesheet" href="{% static 'css/global.css' %}">
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}

<div class="font-['Afacad']">
    <!-- Hero Section -->
    <div class="pt-80 bg-gradient-to-r from-yellow-400 via-[#ffb74c] to-[#fedca9]">
        <div class="container mx-auto px-6 py-12 h-full">
            <div class="flex flex-col md:flex-row items-center justify-between h-full">
                <div class="md:w-1/2 text-white z-30">
                    <h1 class="text-5xl md:text-7xl font-bold mb-4">Subcategory Name</h1>
                    <p class="text-lg mb-8">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer eget dignissim lacus. Donec vel ante non lectus cursus cursus sit amet et ligula. Sed efficitur sem vitae velit pharetra, quis tristique eros aliquam.</p>
                </div>
                <div class="md:w-1/2 mt-8 md:mt-0 flex justify-end">
                    <img src="{% static 'image/star-dynamic-color.png' %}" alt="Star" class="w-1/2 h-auto object-contain">
                </div>  
            </div>
        </div>
    </div>

    <div class="flex justify-between px-4 mt-12 mb-12">
        <!-- Left Box -->
        <div class="flex flex-col w-[48%] space-y-4 bg-white p-6 rounded-3xl drop-shadow-lg">
            {% for session in sessions %}
                {% include 'session_card.html' with session=session %}
            {% endfor %}
        </div>

        <!-- Right Box -->
        <div class="flex flex-col w-[48%] space-y-4 bg-black p-6 rounded-3xl drop-shadow-lg">
            <div class="bg-white rounded-lg p-6 w-full">
                <div class="flex overflow-x-auto space-x-6 pb-4">
                    {% for worker in workers %}
                    <a href="{% url 'main:worker_profile' worker.id %}">
                        <div class="flex-none flex flex-col items-center space-y-3">
                            <img src="{{ worker.image }}" alt="{{ worker.name }}" class="w-20 h-20 rounded-full object-cover">
                            <div class="text-center">
                                <h3 class="font-semibold text-gray-900">{{ worker.name }}</h3>
                                <p class="text-gray-600 text-sm">{{ worker.experience }} years exp.</p>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
            <h2 class="text-3xl font-semibold text-center text-white">Testimonials</h2>
            {% include 'testi_card.html' %}
            {% include 'testi_card.html' %}
            {% include 'testi_card.html' %}
        </div>
    </div>
</div>

<!-- Modal for Booking Service -->
<div class="modal fade" id="bookServiceModal" tabindex="-1" aria-labelledby="bookServiceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div style="font-family: 'Plus Jakarta Sans', sans-serif;" class="modal-content bg-gray-100 shadow-md rounded-lg text-gray-900">
            <div style="background: linear-gradient(90deg, #FFF196 0%, #FFB74C 50%, #FFA5A5 100%);" 
                class="modal-header rounded-t-lg">
                <h5 class="modal-title font-bold text-lg text-gray-900" id="bookServiceModalLabel">Book Service</h5>
                <button type="button" class="btn-close bg-white rounded-full p-1 hover:bg-gray-200" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body bg-white p-6 rounded-lg">
                <form id="bookServiceForm" method="POST" action="{% url 'main:user_service_bookings' %}">
                    {% csrf_token %}
                    
                    <input type="hidden" name="service_name" id="serviceName" value="">
                    
                    <input type="hidden" name="total_payment" id="totalPaymentHidden" value="">

                    <div class="mb-4">
                        <label for="orderDate" class="form-label font-medium text-gray-700">Order Date</label>
                        <input type="text" class="form-control border-yellow-400 rounded-md px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:outline-none" id="orderDate" name="order_date" readonly>
                    </div>

                    <div class="mb-4">
                        <label for="discountCode" class="form-label font-medium text-gray-700">Discount Code</label>
                        <input type="text" class="form-control border-yellow-400 rounded-md px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:outline-none" id="discountCode" placeholder="Enter discount code (optional)">
                    </div>

                    <div class="mb-4">
                        <label for="totalPayment" class="form-label font-medium text-gray-700">Total Payment</label>
                        <input type="text" class="form-control border-yellow-400 rounded-md px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:outline-none" id="totalPayment" readonly>
                    </div>

                    <div class="mb-4">
                        <label for="paymentMethod" class="form-label font-medium text-gray-700">Payment Method</label>
                        <select class="form-select border-yellow-400 rounded-md px-4 py-2 focus:ring-2 focus:ring-yellow-500 focus:outline-none" id="paymentMethod">
                            <option value="credit-card">Credit Card</option>
                            <option value="paypal">PayPal</option>
                            <option value="bank-transfer">Bank Transfer</option>
                        </select>
                    </div>

                    <div class="modal-footer flex justify-end space-x-3 bg-gray-100 rounded-b-lg p-4">
                        <button type="button" class="bg-gray-400 text-white rounded-full px-6 py-2 hover:bg-gray-500 transition" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="bg-yellow-500 text-black font-bold rounded-full px-6 py-2 hover:bg-yellow-600 transition">Confirm Booking</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>




<script>
    document.addEventListener('DOMContentLoaded', function () {
        const bookServiceModal = document.getElementById('bookServiceModal');
        const totalPaymentField = document.getElementById('totalPayment');
        const totalPaymentHiddenField = document.getElementById('totalPaymentHidden');
        const serviceNameField = document.getElementById('serviceName');
        const orderDateField = document.getElementById('orderDate'); 

        bookServiceModal.addEventListener('show.bs.modal', function (event) {
            const button = event.relatedTarget; 
            const sessionPrice = button.getAttribute('data-session-price');
            const sessionName = button.getAttribute('data-session-name');

            totalPaymentField.value = `$${sessionPrice}`;
            totalPaymentHiddenField.value = sessionPrice;
            serviceNameField.value = sessionName;

            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0'); 
            const dd = String(today.getDate()).padStart(2, '0');
            const formattedDate = `${dd}/${mm}/${yyyy}`;

            orderDateField.value = formattedDate;
        });
    });


</script>

{% endblock content %}
