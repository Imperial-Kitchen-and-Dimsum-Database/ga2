{% load static %}

<div class="bg-white rounded-lg shadow-md p-6 mb-4 transition-all hover:shadow-lg">
    <div class="flex justify-between items-start">
        <!-- Session Info -->
        <div class="flex-1">
            <h3 class="text-xl font-bold text-gray-800">{{ session.name }}</h3>
            <div class="mt-2 space-y-2">
                <p class="text-gray-600">
                    <span class="inline-block w-24">Duration:</span>
                    <span class="font-medium">{{ session.duration }} hours</span>
                </p>
                <p class="text-gray-600">
                    <span class="inline-block w-24">Price:</span>
                    <span class="font-medium">${{ session.price }}</span>
                </p>
            </div>
            <!-- Book Service Button -->
            <button 
                class="bg-yellow-400 hover:bg-yellow-500 text-black font-semibold py-2 px-4 rounded-full mt-8 transition-colors" 
                data-bs-toggle="modal" 
                data-bs-target="#bookServiceModal" 
                data-session-name="{{ session.name }}"
                data-session-price="{{ session.price }}"
                data-session-duration="{{ session.duration }}">
                Book Service
            </button>

            {% if user.is_authenticated and user.user_type == 'worker' %}
            <button 
                class="bg-[#FFB74C] hover:bg-[#e9989b] text-white font-semibold py-2 px-4 rounded-full mt-4 transition-colors">
                Join
            </button>
            {% endif %}
        </div>
        <div class="w-64 h-32 bg-gray-200 rounded-lg flex-shrink-0"></div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const bookServiceModal = document.getElementById('bookServiceModal');
        const totalPaymentField = document.getElementById('totalPayment');

        bookServiceModal.addEventListener('show.bs.modal', function (event) {
            const button = event.relatedTarget; 
            const sessionPrice = button.getAttribute('data-session-price');
            totalPaymentField.value = `$${sessionPrice}`; 
        });
    });
</script>